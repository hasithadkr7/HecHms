(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.nbpresentStandalone = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseCellManager=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_nbpresentDeps=require("nbpresent-deps"),_logger=require("../logger"),_parts=require("../parts"),_THUMBS={},BaseCellManager=exports.BaseCellManager=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getCells",value:function(){throw Error("Not Implemented")}},{key:"getPart",value:function(e,t){var r=this.getCells()[e.cell];if(!r&&!t)return null;var n=_nbpresentDeps.d3.select(t||r.element[0]),a=e.part===_parts.PART.whole?n:n.select(_parts.PART_SELECT[e.part]);return a}},{key:"clearThumbnails",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],r=Object.keys(_THUMBS);t.length&&(r=t.map(function(t){return e.contentKey(t)})),r.map(function(e){delete _THUMBS[e]})}},{key:"contentKey",value:function(e){return e.cell+"-"+e.part}},{key:"thumbnail",value:function(e){var t=this.getPart(e);return t=t?t.node():null,t?(0,_nbpresentDeps.html2canvas)(t).then(function(e){return{canvas:e,uri:e.toDataURL("image/png"),width:e.width,height:e.height}},function(t){return _logger.log.error("thumbnail error",e,t)}):Promise.reject(e)}}]),e}();

},{"../logger":6,"../parts":9,"nbpresent-deps":"nbpresent-deps"}],2:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StandaloneCellManager=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_nbpresentDeps=require("nbpresent-deps"),_base=require("./base"),StandaloneCellManager=exports.StandaloneCellManager=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getCells",value:function(){var e={};return _nbpresentDeps.d3.selectAll(".cell").each(function(){var t=_nbpresentDeps.d3.select(this),n=t.attr("data-nbp-id");n&&(e[n]={element:[t.node()]})}),e}}]),t}(_base.BaseCellManager);

},{"./base":1,"nbpresent-deps":"nbpresent-deps"}],3:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridLayout=void 0;var _slicedToArray=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},_nbpresentDeps=require("nbpresent-deps"),_manual=require("./manual"),KEY="grid",PAD="pad",TOLERANCE=.001,GridLayout=exports.GridLayout=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"key",value:function(){return KEY}},{key:"attrDefaults",value:function(){var e={};return e[PAD]=.01,e}},{key:"nice",value:function(e,t){var r=_slicedToArray(t,1),n=r[0],o=e._d,i=Math.round(12*o[n]),a=i/12;return Math.abs(a-o[n])>TOLERANCE&&(e[n]=a),e}},{key:"init",value:function(){var e=this;_get(Object.getPrototypeOf(t.prototype),"init",this).call(this);var r=_nbpresentDeps.d3.entries(this.slide.value.regions);r.map(function(t){var r=["slides",e.slide.key,"regions",t.key,"attrs"],n=_nbpresentDeps._.reduce([["x",0,10],["y",0,10],["width",1,11],["height",1,11]],e.nice,{_d:t.value.attrs},e);delete n._d;var o=!_nbpresentDeps._.isEmpty(n)&&!_nbpresentDeps._.isEqual(n,_nbpresentDeps._.pick(t.value.attrs,"x","y","width","height",PAD));o&&e.tree.merge(r,n)})}}],[{key:"clsKey",value:function(){return KEY}}]),t}(_manual.ManualLayout);

},{"./manual":4,"nbpresent-deps":"nbpresent-deps"}],4:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ManualLayout=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_nbpresentDeps=require("nbpresent-deps"),KEY="manual",ManualLayout=exports.ManualLayout=function(){function e(t,n,r){_classCallCheck(this,e),this.tree=t,this.slide=n,this.container=r}return _createClass(e,[{key:"regions",value:function(){return _nbpresentDeps.d3.entries(this.slide.value.regions)}},{key:"key",value:function(){return KEY}},{key:"attrDefaults",value:function(){return{x:.1,y:.1,width:.8,height:.8}}}],[{key:"clsKey",value:function(){return KEY}}]),_createClass(e,[{key:"init",value:function(){var e=this.container,t=e.clientWidth,n=e.clientHeight;this.x=_nbpresentDeps.d3.scale.linear().range([0,t]),this.y=_nbpresentDeps.d3.scale.linear().range([0,n]),this.initAttrs()}},{key:"initAttrs",value:function(){var e=this,t=this.regions();_nbpresentDeps.d3.entries(this.attrDefaults()).map(function(n){var r=n.key,a=n.value;t.filter(function(e){return null==e.value.attrs[r]}).map(function(t){var n={};n[r]=a,e.tree.merge(["slides",e.slide.key,"regions",t.key,"attrs"],n)})})}},{key:"update",value:function(e,t){var n=e.value.attrs,r=n.x,a=n.y,i=n.width,s=n.height,l=n.z,u=n.pad;l=l||0,u=u||0,t.style({height:parseInt(this.y(s-2*u))+"px",left:parseInt(this.x(r+u))+"px",top:parseInt(this.y(a+u))+"px",width:parseInt(this.x(i+2*u))+"px"})}},{key:"clean",value:function(e){e.style({left:null,top:null,width:null,height:null})}}]),e}();

},{"nbpresent-deps":"nbpresent-deps"}],5:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TreemapLayout=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},_nbpresentDeps=require("nbpresent-deps"),_manual=require("./manual"),KEY="treemap",WEIGHT="treemap:weight",TreemapLayout=exports.TreemapLayout=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"attrDefaults",value:function(){var e={};return e[WEIGHT]=1,e}},{key:"key",value:function(){return KEY}},{key:"init",value:function(){_get(Object.getPrototypeOf(t.prototype),"init",this).call(this);var e=this;this.treemap=_nbpresentDeps.d3.layout.treemap().size([100,100]).sticky(!0).value(function(e){return(e._value||{}).attrs[WEIGHT]||1});var r=_nbpresentDeps.d3.entries(this.slide.value.regions).map(function(e){return e._value=e.value,e});this.treemap({children:r}),r.map(function(t){var r=["slides",e.slide.key,"regions",t.key,"attrs"],n=e.tree.get(r),o={x:t.x/100,y:t.y/100,width:t.dx/100,height:t.dy/100},i=void 0;for(var a in o)n[a]!==o[a]&&((i?i:i={})[a]=o[a]);i&&e.tree.merge(r,i)})}}],[{key:"clsKey",value:function(){return KEY}}]),t}(_manual.ManualLayout);

},{"./manual":4,"nbpresent-deps":"nbpresent-deps"}],6:[function(require,module,exports){
"use strict";function setLevel(e){_logLevel=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setLevel=setLevel;var ERROR=exports.ERROR=0,WARN=exports.WARN=1,INFO=exports.INFO=2,LOG=exports.LOG=3,DEBUG=exports.DEBUG=4,_logLevel=DEBUG,log=exports.log={error:function(){var e;(e=console).error.apply(e,arguments)},warn:function(){var e;_logLevel>=WARN&&(e=console).warn.apply(e,arguments)},info:function(){var e;_logLevel>=INFO&&(e=console).info.apply(e,arguments)},log:function(){var e;_logLevel>=LOG&&(e=console).log.apply(e,arguments)},debug:function(){var e;_logLevel>=LOG&&(e=console).debug.apply(e,arguments)}};

},{}],7:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseMode=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),_tree=require("../tree"),_logger=require("../logger"),BaseMode=exports.BaseMode=function(){function e(t){_classCallCheck(this,e),this.root=t,this.tree=new _tree.Tree({slides:this.metadata().slides,themes:this.metadata().themes,root:this.root}).tree,this.slides=this.tree.select(["slides"]),this.themes=this.tree.select(["themes"]),this.log=_logger.log,this.init()}return _createClass(e,[{key:"init",value:function(){return this}}]),e}();

},{"../logger":6,"../tree":16}],8:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StandaloneMode=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},_nbpresentDeps=require("nbpresent-deps"),_standalone=require("../presenter/standalone"),_base=require("./base"),StandaloneMode=exports.StandaloneMode=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){return _get(Object.getPrototypeOf(t.prototype),"init",this).call(this),this.presenter=new _standalone.StandalonePresenter(this.tree),this.presenter.presenting.set(!0),this}},{key:"metadata",value:function(){var e=JSON.parse(_nbpresentDeps.d3.select("#nbpresent_tree").text());return{slides:e.slides||{},themes:e.themes||{},root:this.root}}}]),t}(_base.BaseMode);

},{"../presenter/standalone":11,"./base":7,"nbpresent-deps":"nbpresent-deps"}],9:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.partColor=exports.PART_SELECT=exports.PART=void 0;var _nbpresentDeps=require("nbpresent-deps"),PART={source:"source",outputs:"outputs",widgets:"widgets",whole:"whole"},PART_SELECT={source:".inner_cell",outputs:".output_wrapper",widgets:".widget-area .widget-subarea",whole:null},partColor=_nbpresentDeps.d3.scale.ordinal().domain(_nbpresentDeps.d3.values(PART)).range(["blue","red","purple","orange"]);exports.PART=PART,exports.PART_SELECT=PART_SELECT,exports.partColor=partColor;

},{"nbpresent-deps":"nbpresent-deps"}],10:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Presenter=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),_nbpresentDeps=require("nbpresent-deps"),_base=require("../speaker/base"),_base2=require("../theme/base"),_manual=require("../layout/manual"),_treemap=require("../layout/treemap"),_grid=require("../layout/grid"),_parts=require("../parts"),Presenter=exports.Presenter=function(){function e(t){var n=this;_classCallCheck(this,e),this.tree=t,this.slides=t.select(["sortedSlides"]),this.cellManager=this.makeCellManager(),this.speaker=this.makeSpeaker(this.tree),this.initUI(),this.themes=this.tree.select(["themes"]),this.presenting=this.tree.select(["app","presenting"]),this.current=this.tree.select(["app","selectedSlide"]),this.presenting.on("update",function(){return n.present()}),[this.slides,this.current,this.themes].map(function(e){var t=e.on;return t("update",function(){return n.update()})})}return _createClass(e,[{key:"makeCellManager",value:function(){throw new Error("Not implemented")}},{key:"makeSpeaker",value:function(e){return new _base.SpeakerBase(e)}},{key:"initUI",value:function(){var e=this;this.$ui=_nbpresentDeps.d3.select("body").append("div").classed({"nbp-presenter":1}),_nbpresentDeps.d3.select(window).on("mousemove",function(){e.presenting.get()&&e.speaker.hint()}),this.$style=_nbpresentDeps.d3.select("head").append("style").classed({"nbp-presenter-style":1}),this.$backgrounds=this.$ui.append("div").classed({"nbp-presenter-backgrounds":1})}},{key:"initActions",value:function(){}},{key:"deinitActions",value:function(){}},{key:"layoutClass",value:function(e){return{manual:_manual.ManualLayout,treemap:_treemap.TreemapLayout,grid:_grid.GridLayout}[e.value.layout||"manual"]}},{key:"updateLayout",value:function(e){var t=this.layoutClass(e);return this.layout&&this.layout.key()==t.clsKey()&&this.layout.slide.key===e.key?this.layout.slide=e:this.layout=new t(this.tree,e,document.documentElement),this.layout.init(),this}},{key:"themeClass",value:function(e){return _base2.ThemeBase}},{key:"updateTheme",value:function(e){var t=this.themeClass(e),n=this.themes.get(),s=e.value.theme||n["default"];return n.theme&&!n.theme[s]&&(s=Object.keys(n.theme)[0]),this.theme=new t(this.themes.select(["theme",s||"<default>"]),e,this.$style),this.theme.init(),this}},{key:"present",value:function(){this.presenting.get()?this.initActions():this.deinitActions(),this.update()}},{key:"getCells",value:function(){return this.cellManager.getCells()}},{key:"update",value:function(){var e=this.presenting.get(),t=this;_nbpresentDeps.d3.select("body").classed({"nbp-presenting":e});var n=this.current.get(),s=this.slides.get([{key:n}]);if(!s)return this.current.set(this.slides.get([0,"key"]));if(this.updateLayout(s).updateTheme(s),!e)return this.clean(!0);var r=this.getCells();_nbpresentDeps.d3.selectAll(this.allPartSelect()).classed({"nbp-unpresent":1,"nbp-present":0}),_nbpresentDeps.d3.entries(s.value.regions).filter(function(e){var t=e.value;return t.content}).map(function(e){var n=e.value.content,s=r[n.cell];if(s){var a=_nbpresentDeps.d3.select(s.element[0]),i=n.part===_parts.PART.whole?a:a.select(_parts.PART_SELECT[n.part]);i.classed({"nbp-unpresent":0,"nbp-present":1}).each(function(){return t.theme.update(e,i)}).each(function(){return t.layout.update(e,i)})}}),this.clean()}},{key:"allPartSelect",value:function(){return _nbpresentDeps.d3.entries(_parts.PART_SELECT).filter(function(e){var t=e.value;return t}).map(function(e){var t=e.value;return".cell "+t}).concat([".cell"]).join(", ")}},{key:"clean",value:function t(e){var n=this,t=n.layout&&this.layout.clean||function(){return 0};return e&&_nbpresentDeps.d3.selectAll(this.allPartSelect()).classed({"nbp-unpresent":1,"nbp-present":0}),_nbpresentDeps.d3.selectAll(".nbp-unpresent").call(t).classed({"nbp-unpresent":0,"nbp-present":0}),this}}]),e}();

},{"../layout/grid":3,"../layout/manual":4,"../layout/treemap":5,"../parts":9,"../speaker/base":12,"../theme/base":13,"nbpresent-deps":"nbpresent-deps"}],11:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StandalonePresenter=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_nbpresentDeps=require("nbpresent-deps"),_standalone=require("../cells/standalone"),_base=require("./base"),KEYS={ESC:27,LEFT:37,RIGHT:39,SPACE:32},StandalonePresenter=exports.StandalonePresenter=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"makeCellManager",value:function(){return new _standalone.StandaloneCellManager}},{key:"initActions",value:function(){var e=this;_nbpresentDeps.d3.select("body").on("keydown",function(){switch(_nbpresentDeps.d3.event.keyCode){case KEYS.RIGHT:case KEYS.SPACE:e.speaker.advance();break;case KEYS.LEFT:e.speaker.retreat();break;case KEYS.ESC:e.present()}})}}]),t}(_base.Presenter);

},{"../cells/standalone":2,"./base":10,"nbpresent-deps":"nbpresent-deps"}],12:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeakerBase=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_nbpresentDeps=require("nbpresent-deps"),_toolbar=require("../toolbar"),SpeakerBase=exports.SpeakerBase=function(){function e(t){var n=this;_classCallCheck(this,e),this.tree=t,this.current=this.tree.select(["app","selectedSlide"]),this.presenting=this.tree.select(["app","presenting"]),this.presenting.on("update",function(){return n.update()}),this.init().initUI().update()}return _createClass(e,[{key:"init",value:function(){return this}},{key:"initUI",value:function(){var e=this;return this.$ui=_nbpresentDeps.d3.select("body").append("div").classed({nbpresent_speaker:1}).on("mouseover",function(){return e.focused=!0}).on("mouseout",function(){e.focused=!1,e.startDecay()}),this.initToolbar(),this.startDecay(),this}},{key:"update",value:function(){this.$ui.style({display:this.presenting.get()?null:"none"})}},{key:"decay",value:function(){this.energy=.8*(this.energy||0),this.$ui.style({opacity:this.focused?1:this.energy}),this.focused?(clearInterval(this.decayInterval),this.decayInterval=null):this.energy<=.1&&(clearInterval(this.decayInterval),this.decayInterval=null,this.energy=0)}},{key:"startDecay",value:function(){var e=this;this.energy=.6,this.decayInerval||(this.decayInerval=setInterval(function(){return e.decay()},100))}},{key:"hint",value:function(){this.startDecay()}},{key:"toolbarIcons",value:function(){var e=this,t=this;return[[{icon:"fast-backward",click:function(){return t.current.set(e.tree.get(["sortedSlides",0,"key"]))},label:"First"}],[{icon:"step-backward",click:function(){return e.retreat()},label:"Previous"}],[{icon:"step-forward",click:function(){return e.advance()},label:"Next"}]]}},{key:"retreat",value:function(){var e=this.tree.get(["slides",this.current.get()]);this.current.set(e.prev)}},{key:"advance",value:function(){var e=this,t=this.tree.get(["slides"]),n=t[this.current.get()];return _nbpresentDeps.d3.entries(t).map(function(t){t.value.prev===n.id&&e.current.set(t.key)}),this.current.get()}},{key:"initToolbar",value:function(){var e=new _toolbar.Toolbar;return e.btnGroupClass("btn-group-vertical").btnClass("btn-link btn-lg").tipOptions({container:"body",placement:"top"}),this.$toolbar=this.$ui.append("div").classed({"nbp-presenter-toolbar":1}).datum(this.toolbarIcons()).call(e.update),this}}]),e}();

},{"../toolbar":15,"nbpresent-deps":"nbpresent-deps"}],13:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ThemeBase=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_nbpresentDeps=require("nbpresent-deps"),_fonts=require("./fonts"),PRESENT_PREFIX=".nbp-presenting .nbp-present",ThemeBase=exports.ThemeBase=function(){function e(t,n,r){_classCallCheck(this,e),this.theme=t,this.rules=t.select(["rules"]),this.palette=t.select(["palette"]),this.backgrounds=t.select(["backgrounds"]),this.textBase=t.select(["text-base"]),this.slide=n,this.$style=r}return _createClass(e,[{key:"update",value:function(e,t){}},{key:"init",value:function(){var e=this.palette.get()||{},t=[{key:"",value:this.textBase.get()||{}}].concat(_nbpresentDeps.d3.entries(this.rules.get()||{})).map(function(t){var n=t.key,r=t.value,s=_nbpresentDeps.d3.entries(r).map(function(t){var n=t.key,r=t.value;switch(n){case"font-size":r+="rem";break;case"font-family":(0,_fonts.loadFonts)([r]),r='"'+r+'"';break;case"color":var s=e[r]||{},a=s.rgb,o=void 0===a?[0,0,0]:a,i=s.a,u=void 0===i?1:i;r="rgba("+o+", "+u+")"}return"	"+n+": "+r+";"}),a=_nbpresentDeps.d3.range(1,7).map(function(e){return"h"+e}).concat(["blockquote"]);return-1!==a.indexOf(n)&&(s.push("margin: 0 0 1.3em 0;"),s.push("padding: 0;")),PRESENT_PREFIX+" "+n+"{\n          line-height: 1.25;\n          "+s.join("\n")+"\n        }"}).join("\n");this.$style.text(t);var n=this.backgrounds.get()||{},r=_nbpresentDeps.d3.select(".nbp-presenter-backgrounds").selectAll(".nbp-presenter-background").data(_nbpresentDeps.d3.entries(n,function(e){var t=e.key;return t}));r.exit().remove(),r.enter().append("div").classed({"nbp-presenter-background":1}),r.style({"background-image":function(e){var t=e.value,n=t["background-image"];return n&&"url("+n+")"},"background-color":function(t){var n=t.value,r=e[n["background-color"]]||{},s=r.rgb;return s&&"rgb("+s+")"},"background-position":function(e){var t=e.value;return t.x+" "+t.y},left:0,right:0,bottom:0,top:0})}}]),e}();

},{"./fonts":14,"nbpresent-deps":"nbpresent-deps"}],14:[function(require,module,exports){
"use strict";function loadFonts(e){return e=_nbpresentDeps._.difference(e,_nbpresentDeps._.keys(_fontLoaded)),e.length?(_nbpresentDeps.WebFont.load({google:{families:e}}),_nbpresentDeps._.extend(_fontLoaded,_nbpresentDeps._.object(e,e)),e):[]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FONTS=exports.FONTS_MONO=exports.SYMB=void 0,exports.loadFonts=loadFonts;var _nbpresentDeps=require("nbpresent-deps"),SYMB=exports.SYMB="h1 h2 h3 h4 h5 h6 h7\n    ul ol li\n    blockquote pre code\n    strong em a i\n    table thead tbody tfoot th td".split(/\s+/),FONTS_MONO=exports.FONTS_MONO=["Inconsolata","Source Code Pro","Roboto Mono","Droid Sans Mono","Ubuntu Mono","VT323","PT Mono","Cousine","Oxygen Mono","Anonymous Pro","Fira Mono","Cutive Mono","Nova Mono","Share Tech Mono"],FONTS=exports.FONTS=["ABeeZee","Abel","Abril Fatface","Alegreya","Alfa Slab One","Alice","Allerta","Amaranth","Amatic SC","Andika","Arimo","Asap","Average","Bevan","Bitter","Bree Serif","Cabin","Cantata One","Cardo","Clicker Script","Crete Round","Crimson Text","Dancing Script","Didact Gothic","Domine","Dosis","Droid Sans","EB Garamond","Exo","Fanwood Text","Fauna One","Fjalla One","Flamenco","Francois One","Gentium Book Basic","Gudea","Hind","Imprima","Istok Web","Josefin Sans","Josefin Slab","Judson","Kameron","Kreon","Lato","Ledger","Libre Baskerville","Lobster","Lora","Lustria","Medula One","Merriweather","Montserrat","Muli","Neuton","Nixie One","Noto Sans","Nunito","Old Standard TT","Open Sans","Oswald","Ovo","Oxygen","PT Sans","PT Serif","Pacifico","Patua One","Philosopher","Playfair Display","Playfair Display SC","Pontano Sans","Quando","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Raleway","Rancho","Roboto","Roboto Slab","Rokkitt","Rufina","Sacramento","Sansita One","Shadows Into Light","Signika","Sintony","Slabo 13px","Source Sans Pro","Squada One","Stint Ultra Expanded","Ubuntu","Ultra","Unica One","Vollkorn","Walter Turncoat","Yeseva One"].concat(FONTS_MONO),_fontLoaded={Lato:1,"google:Lato":1};loadFonts(["Lato"]);

},{"nbpresent-deps":"nbpresent-deps"}],15:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Toolbar=void 0;var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),_nbpresentDeps=require("nbpresent-deps"),fn=_nbpresentDeps.d3.functor,Toolbar=exports.Toolbar=function(){function t(){_classCallCheck(this,t),this._btnClass=fn("btn-default"),this._btnGroupClass=fn("btn-group"),this._tipOptions=fn({container:"body"}),this.update=this.update.bind(this)}return _createClass(t,[{key:"btnClass",value:function(t){return arguments.length?[this._btnClass=fn(t),this][1]:this._btnClass}},{key:"tipOptions",value:function(t){return arguments.length?[this._tipOptions=fn(t),this][1]:this._tipOptions}},{key:"btnGroupClass",value:function(t){return arguments.length?[this._btnGroupClass=fn(t),this][1]:this._btnGroupClass}},{key:"update",value:function(t){var n=this,e=this;t.classed({"btn-toolbar nbp-toolbar":1});var r=t.selectAll(".btn-toolbar-group").data(function(t){return t});r.enter().append("div").classed({"btn-toolbar-group":1}).classed(this._btnGroupClass(),1);var s=r.selectAll(".btn").data(function(t){return t});s.enter().append("a").classed({btn:1}).call(function(t){t.append("i"),t.append("label")}),s.attr({"class":function(t){return"btn "+n._btnClass(t)},title:function(t){return t.tip||t.label}}).each(function(t){if(_nbpresentDeps.$.fn.tooltip){try{(0,_nbpresentDeps.$)(this).tooltip("destroy")}catch(n){}t.tip&&(0,_nbpresentDeps.$)(this).tooltip(e._tipOptions(t))}}).on("click",function(t){return t.click()}),s.select("i").filter(function(t){var n=t.icon;return _nbpresentDeps._.isString(n)}).attr({"class":function(t){var n=t.icon;return"fa fa-fw fa-2x fa-"+n}}).selectAll("i").remove();var i=s.select("i").filter(function(t){var n=t.icon;return!_nbpresentDeps._.isString(n)}).attr({"class":"fa-stack"}).selectAll("i").data(function(t){return t.icon.map(function(){return t})});i.exit().remove(),i.enter().append("i"),i.attr({"class":function(t,n){var e=t.icon;return"fa fa-"+e[n]}}),s.select("label").text(function(t){var n=t.label;return n}),s.filter(function(t){return t.visible&&!t.visible()}).remove(),s.exit().remove(),r.exit().remove()}}]),t}();

},{"nbpresent-deps":"nbpresent-deps"}],16:[function(require,module,exports){
"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tree=void 0;var _createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),_nbpresentDeps=require("nbpresent-deps"),Tree=exports.Tree=function(){function e(r){_classCallCheck(this,e),this.tree=new _nbpresentDeps.Baobab(_nbpresentDeps.$.extend({slides:{},sortedSlides:_nbpresentDeps.Baobab.monkey(["slides"],this.sortedSlides),themes:{}},r))}return _createClass(e,[{key:"sortedSlides",value:function(e){var r=_nbpresentDeps.d3.entries(e);return r.sort(function(e,r){return null===e.value.prev||e.key===r.value.prev?-1:1}),r}}]),e}();

},{"nbpresent-deps":"nbpresent-deps"}]},{},[8])(8)
});